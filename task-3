import nltk
import random
import numpy as np
from sklearn.feature_extraction.text import CountVectorizer
from sklearn.naive_bayes import MultinomialNB
from nltk.stem import WordNetLemmatizer
# Download necessary resources
nltk.download('punkt')
nltk.download('wordnet')
# Initialize
lemmatizer = WordNetLemmatizer()
# Define intents
intents = {
    "intents": [
        {"tag": "greeting",
         "patterns": ["Hi", "Hello", "Hey", "What's up", "Howdy"],
         "responses": ["Hello!", "Hi there!", "Greetings!"]},
        {"tag": "goodbye",
         "patterns": ["Bye", "See you", "Goodbye", "Later"],
         "responses": ["Bye!", "See you later!", "Goodbye!"]},
        {"tag": "thanks",
         "patterns": ["Thanks", "Thank you", "I appreciate it"],
         "responses": ["You're welcome!", "No problem!", "Anytime!"]},
        {"tag": "name",
         "patterns": ["What's your name?", "Who are you?"],
         "responses": ["I'm a chatbot.", "My name is Chatbot AI."]},
        {"tag": "age",
         "patterns": ["How old are you?", "What's your age?"],
         "responses": ["I am timeless!", "I don't have an age like humans."]}
    ]
}
# Preprocessing
all_patterns = []
tags = []
for intent in intents['intents']:
    for pattern in intent['patterns']:
        tokens = nltk.word_tokenize(pattern)
        tokens = [lemmatizer.lemmatize(word.lower()) for word in tokens]
        all_patterns.append(" ".join(tokens))
        tags.append(intent['tag']
# Vectorization
vectorizer = CountVectorizer()
X = vectorizer.fit_transform(all_patterns)
y = np.array(tags)
# Train model
model = MultinomialNB()
model.fit(X, y)
# Response generator
def chatbot_response(user_input):
    tokens = nltk.word_tokenize(user_input)
    tokens = [lemmatizer.lemmatize(word.lower()) for word in tokens]
    input_data = vectorizer.transform([" ".join(tokens)])
    predicted_tag = model.predict(input_data)[0]
    for intent in intents['intents']:
        if intent['tag'] == predicted_tag:
            return random.choice(intent['responses'])
# Chat loop
print("ðŸ¤– Chatbot is ready! Type 'quit' to stop.")
while True:
    user_input = input("You: ")
    if user_input.lower() == "quit":
        print("ðŸ¤– Chatbot: Goodbye!")
        break
    response = chatbot_response(user_input)
    print("ðŸ¤– Chatbot:", response)
